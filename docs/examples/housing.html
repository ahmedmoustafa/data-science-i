<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Using PCA with the California Housing Dataset</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="housing_files/libs/clipboard/clipboard.min.js"></script>
<script src="housing_files/libs/quarto-html/quarto.js"></script>
<script src="housing_files/libs/quarto-html/popper.min.js"></script>
<script src="housing_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="housing_files/libs/quarto-html/anchor.min.js"></script>
<link href="housing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="housing_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="housing_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="housing_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="housing_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using PCA with the California Housing Dataset</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="objective" class="level1">
<h1>Objective</h1>
<p>The aim is to apply Principal Component Analysis (PCA) to <a href="https://github.com/ahmedmoustafa/datasets/tree/main/housing">the California Housing dataset</a>, with the goal of exploring structures and reducing dimensionality. This analysis is to identify the principal components that best capture the variability in the housing data, which can provide insights into the most influential factors affecting housing values across California.</p>
</section>
<section id="starting-up" class="level1">
<h1>Starting up</h1>
<p>So let’s first make sure that the required packages are installed. If they are not already installed, they will be installed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"ggplot2"</span>)) <span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggplot2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>()) <span class="co"># Set the default ggplot theme to the light theme</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="loading-the-dataset" class="level1">
<h1>Loading the dataset</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">=</span> <span class="fu">read.csv</span> (<span class="st">"https://raw.githubusercontent.com/ahmedmoustafa/datasets/main/housing/housing.csv"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20640    10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">longitude</th>
<th style="text-align: right;">latitude</th>
<th style="text-align: right;">housing_median_age</th>
<th style="text-align: right;">total_rooms</th>
<th style="text-align: right;">total_bedrooms</th>
<th style="text-align: right;">population</th>
<th style="text-align: right;">households</th>
<th style="text-align: right;">median_income</th>
<th style="text-align: right;">median_house_value</th>
<th style="text-align: left;">ocean_proximity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-122.23</td>
<td style="text-align: right;">37.88</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">880</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">322</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">8.3252</td>
<td style="text-align: right;">452600</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="even">
<td style="text-align: right;">-122.22</td>
<td style="text-align: right;">37.86</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">7099</td>
<td style="text-align: right;">1106</td>
<td style="text-align: right;">2401</td>
<td style="text-align: right;">1138</td>
<td style="text-align: right;">8.3014</td>
<td style="text-align: right;">358500</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-122.24</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">1467</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">496</td>
<td style="text-align: right;">177</td>
<td style="text-align: right;">7.2574</td>
<td style="text-align: right;">352100</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="even">
<td style="text-align: right;">-122.25</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">1274</td>
<td style="text-align: right;">235</td>
<td style="text-align: right;">558</td>
<td style="text-align: right;">219</td>
<td style="text-align: right;">5.6431</td>
<td style="text-align: right;">341300</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-122.25</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">1627</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">565</td>
<td style="text-align: right;">259</td>
<td style="text-align: right;">3.8462</td>
<td style="text-align: right;">342200</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="even">
<td style="text-align: right;">-122.25</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">919</td>
<td style="text-align: right;">213</td>
<td style="text-align: right;">413</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">4.0368</td>
<td style="text-align: right;">269700</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="cleaning-the-dataset" class="level1">
<h1>Cleaning the dataset</h1>
<p>To ensure the quality of our analysis, it is essential to address missing values within our dataset. So, we implement a user-defined function named <code>is_any_na()</code>. This function will detect the presence of missing values in each row of the dataset. Identifying rows with missing data is a crucial <strong>preprocessing</strong> step, as incomplete information can significantly skew PCA results and lead to inaccurate interpretations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>is_any_na <span class="ot">=</span> <span class="cf">function</span> (x) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span> (<span class="fu">any</span>(<span class="fu">is.na</span>(x)))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We will now utilize our user-defined function <code>is_any_na()</code> to systematically <strong>apply</strong> across the dataset, identifying which rows contain missing values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">=</span> <span class="fu">apply</span>(df1, <span class="dv">1</span>, is_any_na)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(missing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>The vector <code>missing</code> is a list of Boolean values, where <code>TRUE</code> entries correspond to rows in <code>df1</code> that contain at least one missing (i.e., <code>NA</code>) entry.</p>
<p><strong>Note</strong>: If we pass a list of Boolean values to the <code>sum()</code> function, it will return the <strong>number</strong> of <code>TRUE</code> values. So the number of rows in <code>df1</code> with missing values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(missing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 207</code></pre>
</div>
</div>
<p>An overview of the rows with missing values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df1[missing, ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">longitude</th>
<th style="text-align: right;">latitude</th>
<th style="text-align: right;">housing_median_age</th>
<th style="text-align: right;">total_rooms</th>
<th style="text-align: right;">total_bedrooms</th>
<th style="text-align: right;">population</th>
<th style="text-align: right;">households</th>
<th style="text-align: right;">median_income</th>
<th style="text-align: right;">median_house_value</th>
<th style="text-align: left;">ocean_proximity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">291</td>
<td style="text-align: right;">-122.16</td>
<td style="text-align: right;">37.77</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">1256</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">570</td>
<td style="text-align: right;">218</td>
<td style="text-align: right;">4.3750</td>
<td style="text-align: right;">161900</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="even">
<td style="text-align: left;">342</td>
<td style="text-align: right;">-122.17</td>
<td style="text-align: right;">37.75</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">992</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">732</td>
<td style="text-align: right;">259</td>
<td style="text-align: right;">1.6196</td>
<td style="text-align: right;">85100</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="odd">
<td style="text-align: left;">539</td>
<td style="text-align: right;">-122.28</td>
<td style="text-align: right;">37.78</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">5154</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3741</td>
<td style="text-align: right;">1273</td>
<td style="text-align: right;">2.5762</td>
<td style="text-align: right;">173400</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="even">
<td style="text-align: left;">564</td>
<td style="text-align: right;">-122.24</td>
<td style="text-align: right;">37.75</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">891</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">146</td>
<td style="text-align: right;">4.9489</td>
<td style="text-align: right;">247100</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="odd">
<td style="text-align: left;">697</td>
<td style="text-align: right;">-122.10</td>
<td style="text-align: right;">37.69</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">746</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">387</td>
<td style="text-align: right;">161</td>
<td style="text-align: right;">3.9063</td>
<td style="text-align: right;">178400</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
<tr class="even">
<td style="text-align: left;">739</td>
<td style="text-align: right;">-122.14</td>
<td style="text-align: right;">37.67</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">3342</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1635</td>
<td style="text-align: right;">557</td>
<td style="text-align: right;">4.7933</td>
<td style="text-align: right;">186900</td>
<td style="text-align: left;">NEAR BAY</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now let’s extract the rows without any missingness by, basically, negating (with the <code>!</code> operator) the <code>missing</code> vector i.e., switching <code>TRUE</code> to <code>FALSE</code> and switching <code>FALSE</code> to <code>TRUE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">=</span> df1[<span class="sc">!</span>missing, ]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20433    10</code></pre>
</div>
</div>
<p>Dataframe <code>df2</code> has 20433 without any missing value ✓</p>
<p>It is almost ready for performing the PCA analysis; however, the input matrix to the <code>procomp()</code> function must be <strong>numeric</strong> and our dataset contains a categorical a variable/column/feature <code>ocean_proximity</code> with the following values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df2<span class="sc">$</span>ocean_proximity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">&lt;1H OCEAN</th>
<th style="text-align: right;">INLAND</th>
<th style="text-align: right;">ISLAND</th>
<th style="text-align: right;">NEAR BAY</th>
<th style="text-align: right;">NEAR OCEAN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">9034</td>
<td style="text-align: right;">6496</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">2270</td>
<td style="text-align: right;">2628</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>To be able to proceed with the PCA analysis, we must to convert <code>ocean_proximity</code> to <code>numeric</code> but first we need to convert to <code>factor</code> with the appropriate <code>levels</code> the convert the <code>factor</code> to <code>numeric</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>ocean_proximity <span class="ot">=</span> <span class="fu">as.numeric</span>(<span class="fu">factor</span>(df2<span class="sc">$</span>ocean_proximity, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"ISLAND"</span>, <span class="co"># The closest to the ocean</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"NEAR BAY"</span>, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"NEAR OCEAN"</span>, </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"&lt;1H OCEAN"</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"INLAND"</span> <span class="co"># The farthest from the ocean</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                                                   )</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                                        )</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                                 )</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">longitude</th>
<th style="text-align: right;">latitude</th>
<th style="text-align: right;">housing_median_age</th>
<th style="text-align: right;">total_rooms</th>
<th style="text-align: right;">total_bedrooms</th>
<th style="text-align: right;">population</th>
<th style="text-align: right;">households</th>
<th style="text-align: right;">median_income</th>
<th style="text-align: right;">median_house_value</th>
<th style="text-align: right;">ocean_proximity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-122.23</td>
<td style="text-align: right;">37.88</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">880</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">322</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">8.3252</td>
<td style="text-align: right;">452600</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">-122.22</td>
<td style="text-align: right;">37.86</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">7099</td>
<td style="text-align: right;">1106</td>
<td style="text-align: right;">2401</td>
<td style="text-align: right;">1138</td>
<td style="text-align: right;">8.3014</td>
<td style="text-align: right;">358500</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-122.24</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">1467</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">496</td>
<td style="text-align: right;">177</td>
<td style="text-align: right;">7.2574</td>
<td style="text-align: right;">352100</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">-122.25</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">1274</td>
<td style="text-align: right;">235</td>
<td style="text-align: right;">558</td>
<td style="text-align: right;">219</td>
<td style="text-align: right;">5.6431</td>
<td style="text-align: right;">341300</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-122.25</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">1627</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">565</td>
<td style="text-align: right;">259</td>
<td style="text-align: right;">3.8462</td>
<td style="text-align: right;">342200</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">-122.25</td>
<td style="text-align: right;">37.85</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">919</td>
<td style="text-align: right;">213</td>
<td style="text-align: right;">413</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">4.0368</td>
<td style="text-align: right;">269700</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Notice the converted <code>numeric</code> values under the <code>ocean_proximity</code> column.</p>
</section>
<section id="calculating-the-pca" class="level1">
<h1>Calculating the PCA</h1>
<p>Since the <code>median_house_value</code> column is the target variable in the dataset, it should not be part of the input matrix to the <code>prcomp()</code> function to perform the PCA analysis. Therefore, we will exclude it by referencing its column number (column #9) with the negative sign.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pca_result <span class="ot">=</span> <span class="fu">prcomp</span>(df2[, <span class="sc">-</span><span class="dv">9</span>], <span class="at">scale. =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pca_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Importance of components:
                          PC1    PC2    PC3    PC4     PC5     PC6     PC7
Standard deviation     1.9778 1.3968 1.1163 1.0322 0.75136 0.38516 0.25365
Proportion of Variance 0.4346 0.2168 0.1385 0.1184 0.06273 0.01648 0.00715
Cumulative Proportion  0.4346 0.6514 0.7899 0.9083 0.97100 0.98748 0.99463
                           PC8     PC9
Standard deviation     0.18325 0.12138
Proportion of Variance 0.00373 0.00164
Cumulative Proportion  0.99836 1.00000</code></pre>
</div>
</div>
<p>The above PCA summary shows that PC1 explains about 43.5% of the total variance in the dataset, followed by PC2 which explains about 21.7%, then PC3 which explains about 13.8%. And the first three PCs (PC1, PC2, and PC3) together (cumulatively) explain about 79% of the total variance in the dataset.</p>
</section>
<section id="visualizing-the-pca" class="level1">
<h1>Visualizing the PCA</h1>
<p>In this section, our goal is to explore whether there’s any inherent structure, clustering, or grouping in the transformed dataset, as represented by the projections (or scores) of the housing data onto the principal components (PCs). A key step in this exploration is overlaying the original features, particularly the target variable <code>median_house_value</code>, onto the transformed PCA space. This approach provides a visual representation of how the target variable relates to the principal components. To achieve this, we will construct an augmented dataframe that combines the principal components with the feature of interest, <code>median_house_value</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pca_df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">Price =</span> df2<span class="sc">$</span>median_house_value, pca_result<span class="sc">$</span>x)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pca_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Price</th>
<th style="text-align: right;">PC1</th>
<th style="text-align: right;">PC2</th>
<th style="text-align: right;">PC3</th>
<th style="text-align: right;">PC4</th>
<th style="text-align: right;">PC5</th>
<th style="text-align: right;">PC6</th>
<th style="text-align: right;">PC7</th>
<th style="text-align: right;">PC8</th>
<th style="text-align: right;">PC9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">452600</td>
<td style="text-align: right;">-2.185099</td>
<td style="text-align: right;">1.916306</td>
<td style="text-align: right;">-2.472818</td>
<td style="text-align: right;">1.5576456</td>
<td style="text-align: right;">-0.1891739</td>
<td style="text-align: right;">0.1032005</td>
<td style="text-align: right;">-0.1096529</td>
<td style="text-align: right;">0.3203179</td>
<td style="text-align: right;">0.0806733</td>
</tr>
<tr class="even">
<td style="text-align: right;">358500</td>
<td style="text-align: right;">2.839508</td>
<td style="text-align: right;">2.470729</td>
<td style="text-align: right;">-2.221468</td>
<td style="text-align: right;">1.7377453</td>
<td style="text-align: right;">0.2792764</td>
<td style="text-align: right;">-0.4302054</td>
<td style="text-align: right;">0.1230018</td>
<td style="text-align: right;">0.1383711</td>
<td style="text-align: right;">-0.2798972</td>
</tr>
<tr class="odd">
<td style="text-align: right;">352100</td>
<td style="text-align: right;">-2.063872</td>
<td style="text-align: right;">2.014337</td>
<td style="text-align: right;">-2.644023</td>
<td style="text-align: right;">0.6088575</td>
<td style="text-align: right;">-0.6418161</td>
<td style="text-align: right;">0.0165362</td>
<td style="text-align: right;">0.0919113</td>
<td style="text-align: right;">0.2401319</td>
<td style="text-align: right;">0.0548983</td>
</tr>
<tr class="even">
<td style="text-align: right;">341300</td>
<td style="text-align: right;">-2.011551</td>
<td style="text-align: right;">2.024811</td>
<td style="text-align: right;">-2.286231</td>
<td style="text-align: right;">-0.1151974</td>
<td style="text-align: right;">-0.3273401</td>
<td style="text-align: right;">-0.0131452</td>
<td style="text-align: right;">0.0728109</td>
<td style="text-align: right;">0.2043440</td>
<td style="text-align: right;">0.0420453</td>
</tr>
<tr class="odd">
<td style="text-align: right;">342200</td>
<td style="text-align: right;">-1.867736</td>
<td style="text-align: right;">2.050271</td>
<td style="text-align: right;">-1.901657</td>
<td style="text-align: right;">-0.8910065</td>
<td style="text-align: right;">-0.0088765</td>
<td style="text-align: right;">-0.1675948</td>
<td style="text-align: right;">0.2513776</td>
<td style="text-align: right;">0.0948725</td>
<td style="text-align: right;">-0.0155539</td>
</tr>
<tr class="even">
<td style="text-align: right;">269700</td>
<td style="text-align: right;">-2.245589</td>
<td style="text-align: right;">1.994377</td>
<td style="text-align: right;">-1.906964</td>
<td style="text-align: right;">-0.7757001</td>
<td style="text-align: right;">0.0163533</td>
<td style="text-align: right;">-0.0897660</td>
<td style="text-align: right;">0.1179234</td>
<td style="text-align: right;">0.1472960</td>
<td style="text-align: right;">0.0249755</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="pc1-pc2" class="level2">
<h2 class="anchored" data-anchor-id="pc1-pc2">PC1 &amp; PC2</h2>
<p>Now, let’s create a scatter plot to visualize the distribution of houses based on their projections onto the first two principal components, PC1 and PC2. In this plot, each house will be represented by a point, with the position determined by its scores on these principal components. To gain more insights, we will color-code these points based on the <code>median_house_value</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pca_df) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> PC1, <span class="at">y =</span> PC2, <span class="at">color =</span> Price), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_distiller</span>(<span class="at">palette =</span> <span class="st">"RdYlBu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="housing_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="pc1-pc3" class="level2">
<h2 class="anchored" data-anchor-id="pc1-pc3">PC1 &amp; PC3</h2>
<p>Now that we have visualized and analyzed the distribution of house prices along PC1 and PC2, let’s proceed to explore another dimension. We will create a similar scatter plot, this time projecting the houses onto PC1 and PC3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pca_df) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> PC1, <span class="at">y =</span> PC3, <span class="at">color =</span> Price), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_distiller</span>(<span class="at">palette =</span> <span class="st">"RdYlBu"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="housing_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In above visualization, we can observe a distribution where higher house prices (darker red points) are primarily concentrated at the lower end of PC3 while spread out along PC1. This suggests that PC3 captures aspects of the data that inversely relate to house prices, with lower scores on PC3 potentially associated with higher house values.</p>
</section>
</section>
<section id="loadings-onto-the-principal-components" class="level1">
<h1>Loadings onto the Principal Components</h1>
<p>To understand the influence of the original variables on the principal components, we will examine the loadings, which reflect how each variable contributes to, or weighs upon, each principal component. Our focus is particularly on PC3, as our visual analysis suggested it has a significant relationship with house prices. By analyzing the loadings for PC3, we can find out which features most strongly drive this component and, by extension, may have a more direct impact on the housing values in the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>pca_result<span class="sc">$</span>rotation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">PC1</th>
<th style="text-align: right;">PC2</th>
<th style="text-align: right;">PC3</th>
<th style="text-align: right;">PC4</th>
<th style="text-align: right;">PC5</th>
<th style="text-align: right;">PC6</th>
<th style="text-align: right;">PC7</th>
<th style="text-align: right;">PC8</th>
<th style="text-align: right;">PC9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">longitude</td>
<td style="text-align: right;">0.0805186</td>
<td style="text-align: right;">-0.6982497</td>
<td style="text-align: right;">-0.0361321</td>
<td style="text-align: right;">-0.0502090</td>
<td style="text-align: right;">-0.0049693</td>
<td style="text-align: right;">-0.0954444</td>
<td style="text-align: right;">0.2012927</td>
<td style="text-align: right;">0.6669366</td>
<td style="text-align: right;">-0.0876365</td>
</tr>
<tr class="even">
<td style="text-align: left;">latitude</td>
<td style="text-align: right;">-0.0748256</td>
<td style="text-align: right;">0.6630434</td>
<td style="text-align: right;">0.2740786</td>
<td style="text-align: right;">0.0602034</td>
<td style="text-align: right;">-0.1052334</td>
<td style="text-align: right;">-0.0442013</td>
<td style="text-align: right;">0.1655640</td>
<td style="text-align: right;">0.6560906</td>
<td style="text-align: right;">-0.0716720</td>
</tr>
<tr class="odd">
<td style="text-align: left;">housing_median_age</td>
<td style="text-align: right;">-0.2216216</td>
<td style="text-align: right;">0.0662264</td>
<td style="text-align: right;">-0.4296288</td>
<td style="text-align: right;">-0.5286401</td>
<td style="text-align: right;">-0.6933133</td>
<td style="text-align: right;">-0.0325366</td>
<td style="text-align: right;">0.0188148</td>
<td style="text-align: right;">0.0182212</td>
<td style="text-align: right;">0.0053527</td>
</tr>
<tr class="even">
<td style="text-align: left;">total_rooms</td>
<td style="text-align: right;">0.4829436</td>
<td style="text-align: right;">0.0838299</td>
<td style="text-align: right;">-0.0623221</td>
<td style="text-align: right;">0.0757857</td>
<td style="text-align: right;">-0.1387150</td>
<td style="text-align: right;">-0.3133721</td>
<td style="text-align: right;">0.7376618</td>
<td style="text-align: right;">-0.2565323</td>
<td style="text-align: right;">-0.1507077</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total_bedrooms</td>
<td style="text-align: right;">0.4894560</td>
<td style="text-align: right;">0.0706398</td>
<td style="text-align: right;">-0.0275453</td>
<td style="text-align: right;">-0.1275389</td>
<td style="text-align: right;">-0.0167275</td>
<td style="text-align: right;">-0.3794877</td>
<td style="text-align: right;">-0.2936749</td>
<td style="text-align: right;">0.1300465</td>
<td style="text-align: right;">0.7006926</td>
</tr>
<tr class="even">
<td style="text-align: left;">population</td>
<td style="text-align: right;">0.4712478</td>
<td style="text-align: right;">0.0345713</td>
<td style="text-align: right;">-0.0256393</td>
<td style="text-align: right;">-0.1270844</td>
<td style="text-align: right;">-0.0687266</td>
<td style="text-align: right;">0.8500818</td>
<td style="text-align: right;">0.0996878</td>
<td style="text-align: right;">0.0764219</td>
<td style="text-align: right;">0.1295458</td>
</tr>
<tr class="odd">
<td style="text-align: left;">households</td>
<td style="text-align: right;">0.4904366</td>
<td style="text-align: right;">0.0769056</td>
<td style="text-align: right;">-0.0549193</td>
<td style="text-align: right;">-0.1267378</td>
<td style="text-align: right;">-0.0297202</td>
<td style="text-align: right;">-0.1406062</td>
<td style="text-align: right;">-0.5062419</td>
<td style="text-align: right;">0.0526256</td>
<td style="text-align: right;">-0.6743702</td>
</tr>
<tr class="even">
<td style="text-align: left;">median_income</td>
<td style="text-align: right;">0.0430112</td>
<td style="text-align: right;">0.0041074</td>
<td style="text-align: right;">-0.4264794</td>
<td style="text-align: right;">0.8037141</td>
<td style="text-align: right;">-0.3659183</td>
<td style="text-align: right;">0.0569105</td>
<td style="text-align: right;">-0.1512771</td>
<td style="text-align: right;">0.0929070</td>
<td style="text-align: right;">0.0405064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ocean_proximity</td>
<td style="text-align: right;">0.0393394</td>
<td style="text-align: right;">-0.2220157</td>
<td style="text-align: right;">0.7408060</td>
<td style="text-align: right;">0.1192285</td>
<td style="text-align: right;">-0.5909259</td>
<td style="text-align: right;">0.0041157</td>
<td style="text-align: right;">-0.1105564</td>
<td style="text-align: right;">-0.1563529</td>
<td style="text-align: right;">0.0165306</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>loadings <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">Feature =</span> <span class="fu">row.names</span>(pca_result<span class="sc">$</span>rotation), pca_result<span class="sc">$</span>rotation)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>loadings</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Feature</th>
<th style="text-align: right;">PC1</th>
<th style="text-align: right;">PC2</th>
<th style="text-align: right;">PC3</th>
<th style="text-align: right;">PC4</th>
<th style="text-align: right;">PC5</th>
<th style="text-align: right;">PC6</th>
<th style="text-align: right;">PC7</th>
<th style="text-align: right;">PC8</th>
<th style="text-align: right;">PC9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">longitude</td>
<td style="text-align: left;">longitude</td>
<td style="text-align: right;">0.0805186</td>
<td style="text-align: right;">-0.6982497</td>
<td style="text-align: right;">-0.0361321</td>
<td style="text-align: right;">-0.0502090</td>
<td style="text-align: right;">-0.0049693</td>
<td style="text-align: right;">-0.0954444</td>
<td style="text-align: right;">0.2012927</td>
<td style="text-align: right;">0.6669366</td>
<td style="text-align: right;">-0.0876365</td>
</tr>
<tr class="even">
<td style="text-align: left;">latitude</td>
<td style="text-align: left;">latitude</td>
<td style="text-align: right;">-0.0748256</td>
<td style="text-align: right;">0.6630434</td>
<td style="text-align: right;">0.2740786</td>
<td style="text-align: right;">0.0602034</td>
<td style="text-align: right;">-0.1052334</td>
<td style="text-align: right;">-0.0442013</td>
<td style="text-align: right;">0.1655640</td>
<td style="text-align: right;">0.6560906</td>
<td style="text-align: right;">-0.0716720</td>
</tr>
<tr class="odd">
<td style="text-align: left;">housing_median_age</td>
<td style="text-align: left;">housing_median_age</td>
<td style="text-align: right;">-0.2216216</td>
<td style="text-align: right;">0.0662264</td>
<td style="text-align: right;">-0.4296288</td>
<td style="text-align: right;">-0.5286401</td>
<td style="text-align: right;">-0.6933133</td>
<td style="text-align: right;">-0.0325366</td>
<td style="text-align: right;">0.0188148</td>
<td style="text-align: right;">0.0182212</td>
<td style="text-align: right;">0.0053527</td>
</tr>
<tr class="even">
<td style="text-align: left;">total_rooms</td>
<td style="text-align: left;">total_rooms</td>
<td style="text-align: right;">0.4829436</td>
<td style="text-align: right;">0.0838299</td>
<td style="text-align: right;">-0.0623221</td>
<td style="text-align: right;">0.0757857</td>
<td style="text-align: right;">-0.1387150</td>
<td style="text-align: right;">-0.3133721</td>
<td style="text-align: right;">0.7376618</td>
<td style="text-align: right;">-0.2565323</td>
<td style="text-align: right;">-0.1507077</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total_bedrooms</td>
<td style="text-align: left;">total_bedrooms</td>
<td style="text-align: right;">0.4894560</td>
<td style="text-align: right;">0.0706398</td>
<td style="text-align: right;">-0.0275453</td>
<td style="text-align: right;">-0.1275389</td>
<td style="text-align: right;">-0.0167275</td>
<td style="text-align: right;">-0.3794877</td>
<td style="text-align: right;">-0.2936749</td>
<td style="text-align: right;">0.1300465</td>
<td style="text-align: right;">0.7006926</td>
</tr>
<tr class="even">
<td style="text-align: left;">population</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">0.4712478</td>
<td style="text-align: right;">0.0345713</td>
<td style="text-align: right;">-0.0256393</td>
<td style="text-align: right;">-0.1270844</td>
<td style="text-align: right;">-0.0687266</td>
<td style="text-align: right;">0.8500818</td>
<td style="text-align: right;">0.0996878</td>
<td style="text-align: right;">0.0764219</td>
<td style="text-align: right;">0.1295458</td>
</tr>
<tr class="odd">
<td style="text-align: left;">households</td>
<td style="text-align: left;">households</td>
<td style="text-align: right;">0.4904366</td>
<td style="text-align: right;">0.0769056</td>
<td style="text-align: right;">-0.0549193</td>
<td style="text-align: right;">-0.1267378</td>
<td style="text-align: right;">-0.0297202</td>
<td style="text-align: right;">-0.1406062</td>
<td style="text-align: right;">-0.5062419</td>
<td style="text-align: right;">0.0526256</td>
<td style="text-align: right;">-0.6743702</td>
</tr>
<tr class="even">
<td style="text-align: left;">median_income</td>
<td style="text-align: left;">median_income</td>
<td style="text-align: right;">0.0430112</td>
<td style="text-align: right;">0.0041074</td>
<td style="text-align: right;">-0.4264794</td>
<td style="text-align: right;">0.8037141</td>
<td style="text-align: right;">-0.3659183</td>
<td style="text-align: right;">0.0569105</td>
<td style="text-align: right;">-0.1512771</td>
<td style="text-align: right;">0.0929070</td>
<td style="text-align: right;">0.0405064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ocean_proximity</td>
<td style="text-align: left;">ocean_proximity</td>
<td style="text-align: right;">0.0393394</td>
<td style="text-align: right;">-0.2220157</td>
<td style="text-align: right;">0.7408060</td>
<td style="text-align: right;">0.1192285</td>
<td style="text-align: right;">-0.5909259</td>
<td style="text-align: right;">0.0041157</td>
<td style="text-align: right;">-0.1105564</td>
<td style="text-align: right;">-0.1563529</td>
<td style="text-align: right;">0.0165306</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(loadings) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> Feature, <span class="at">y =</span> PC3), <span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="housing_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see from the above plot, <code>ocean_proximity</code> holds the most positive loading among the features, suggests that <code>ocean_proximity</code> has a strong positive correlation with PC3, pointing to a significant impact of ocean proximity on the housing values as captured by this principal component. On the other hand, <code>housing_median_age</code> shows a substantial negative loading which means that areas with older houses tend to have lower scores on PC3, possibly reflecting housing market dynamics related to the age of properties.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>